import{r as n,j as e,C as p,V as C,H as i,B as f,a as c,I as y,S as v,c as g,L as w,b as L}from"./index-BhI8Pxlq.js";import{u as S}from"./useQuery-BOvoIR13.js";import{a as b}from"./api-Qa43F_vh.js";import{C as l}from"./schemas-DP-A5xcI.js";const M=async()=>({contacts:await b("/api/contacts")}),E=()=>{const{data:t,isLoading:d}=S({queryKey:["contacts"],queryFn:M}),o=n.useMemo(()=>(t==null?void 0:t.contacts)??[],[t]),[a,h]=n.useState(""),[r,x]=n.useState(l.sms),j=n.useMemo(()=>o.filter(s=>{const u=a?s.firstName.toLowerCase().includes(a.toLowerCase())||s.lastName.toLowerCase().includes(a.toLowerCase()):!0,m=r?s.preferredMethod===r:!0;return u&&m}),[o,a,r]);return e.jsx(p,{children:e.jsxs(C,{gap:3,children:[e.jsxs(i,{children:[e.jsx("h1",{children:"Contacts"}),e.jsxs(f,{children:[o.length," total"]})]}),e.jsx(c,{children:e.jsxs(i,{wrap:!0,gap:2,children:[e.jsx(y,{placeholder:"Search name or handle…",value:a,onChange:s=>h(s.target.value)}),e.jsxs(v,{value:r.value,onChange:s=>x(l.fromValue(s.target.value)),children:[e.jsx("option",{value:"",children:"All channels"}),l.toOptions().map(s=>e.jsx("option",{value:s.value,children:s.label}))]})]})}),d?e.jsx(c,{children:"Loading…"}):e.jsx(c,{children:e.jsxs(g,{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Preferred"}),e.jsx("th",{children:"Interval"}),e.jsx("th",{style:{width:1}})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(w,{to:`/contacts/${s.id}`,children:`${s.firstName} ${s.lastName}`})}),e.jsx("td",{children:s.preferredMethod.display}),e.jsxs("td",{children:[s.intervalDays," days"]}),e.jsx("td",{children:e.jsx(L,{variant:"secondary",size:"sm",children:"Edit"})})]},s.id))})]})})]})})};export{E as Contacts};
